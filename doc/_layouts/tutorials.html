{% capture category %}{{page.dir | split: '/' | last}}{% endcapture %}
{% assign is_sources = false %}
{% if category == "sources" %}
  {% capture category %}{{page.dir | replace: '/sources', '' | split: '/' | last}}{% endcapture %}
  {% assign is_sources = true %}
{% endif %}
{% capture tutorial %}{{page.name | replace: '.html', '' | replace: '.md', ''}}{% endcapture %}
{% for cat in site.data.tutorials %}
  {% if cat.id == category %}
    {% assign category = cat %}
    {% unless forloop.last %}
      {% assign next_category = site.data.tutorials[forloop.index] %}
    {% endunless %}
    {% break %}
  {% endif %}
{% endfor %}
{% for tuto in category.tutorials %}
  {% if tuto.id == tutorial %}
    {% assign tutorial = tuto %}
    {% unless forloop.last %}
      {% assign next_category = category %}
      {% assign next_tutorial = category.tutorials[forloop.index] %}
    {% elsif next_category %}
      {% assign next_tutorial = next_category.tutorials[0] %}
    {% endunless %}
  {% endif %}
{% endfor %}
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Tutorials - {{tutorial.title}} - mc_rtc</title>

    <link rel="apple-touch-icon" sizes="180x180" href="{{site.baseurl}}/assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="{{site.baseurl}}/assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="{{site.baseurl}}/assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="{{site.baseurl}}/assets/favicons/site.webmanifest">
    <link rel="mask-icon" href="{{site.baseurl}}/assets/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    {% if site.use_local_libraries %}
    <link rel="stylesheet" href="{{site.baseurl}}/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="{{site.baseurl}}/assets/css/octicons.css" />

    <script src="{{site.baseurl}}/assets/js/jquery.min.js"></script>
    <script src="{{site.baseurl}}/assets/js/popper.min.js"></script>
    <script src="{{site.baseurl}}/assets/js/bootstrap.min.js"></script>
    <script src="{{site.baseurl}}/assets/js/clipboard.min.js"></script>
    {% else %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/8.0.0/build.css" integrity="sha256-iPUhChwurLRCrDCM1+2a2LDe9pfW6Je29o/oA5VPr28=" crossorigin="anonymous" />

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>

    {% endif %}

    {% if page.use_mathjax %}
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
    {% endif %}

    <link href="{{site.baseurl}}/css/mc_rtc.css" rel="stylesheet">
  </head>

  <body>
    <header class="navbar navbar-expand-lg navbar-light bg-light sticky-top" role="navigation">
      <a class="navbar-brand" href="{{site.baseurl}}/index.html"><img src="{{site.baseurl}}/assets/logo.png" alt="logo" width="30" height="30"/> mc_rtc</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarText">
        <div class="navbar-nav mr-auto">
          {% for itm in site.data.nav %}
          {% if itm.name == "Tutorials" %}
            {% assign active = "active" %}
          {% else %}
            {% assign active = "" %}
          {% endif %}
          {% if itm.items %}
          <div class="nav-item dropdown">
            <a class="nav-link dropdown-toggle {{active}}" href="#" id="{{itm.id}}" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{itm.name}}</a>
            <div class="dropdown-menu" arial-labelledby="{{itm.id}}">
              <a class="dropdown-item" href="{{site.baseurl}}/{{itm.page}}">{{itm.name}}</a>
              <div class="dropdown-divider"></div>
              {% for subitm in itm.items %}
                <a class="dropdown-item" href="{{site.baseurl}}/{{subitm.page}}">{{subitm.name}}</a>
              {% endfor %}
            </div>
          </div>
          {% else %}
          <a class="nav-item nav-link {{active}}" href="{{site.baseurl}}/{{itm.page}}">{{itm.name}}</a>
          {% endif %}
          {% endfor %}
        </div>
        <a href="https://github.com/jrl-umi3218/mc_rtc" target="blank_">{% octicon mark-github height:25 width:25 %}</a>
      </div>
    </header>

    <div class="container-fluid">
      <div class="row">
      <div class="col col-lg-3">
        <div class="sticky-top sticky-toc">
          <div class="accordion" id="accordionTutorials">
            <div class="card">
              <div class="card-header" id="headingOtherTutorials">
                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOtherTutorials" aria-expanded="true" aria-controls="collapseOtherTutorials">
                  Other tutorials
                </button>
              </div>
              <div id="collapseOtherTutorials" class="collapse" arial-labelledby="headingOtherTutorials" data-parent="#accordionTutorials">
                <div class="card-body">
                  <ul>
                    {% for cat in site.data.tutorials %}
                    <li>{{cat.title}}</li>
                    <ul>
                      {% for tuto in cat.tutorials %}
                        {% if category.id == cat.id and tuto.id == tutorial.id %}
                        <li><strong>{{tuto.title}}</strong></li>
                          {% if is_sources %}
                            <ul>
                              <li><a href="{{site.baseurl}}/tutorials/{{cat.id}}/{{tuto.id}}.html">Back to tutorial</a></li>
                            </ul>
                          {% endif %}
                        {% else %}
                        <li><a href="{{site.baseurl}}/tutorials/{{cat.id}}/{{tuto.id}}.html">{{tuto.title}}</a></li>
                        {% endif %}
                      {% endfor %}
                    </ul>
                    {% endfor %}
                  </ul>
                </div>
              </div>
              {{ content | toc_only }}
            </div>
          </div>
        </div>
      </div>
      <div class="col-9" id="tutorial-content">
        <h1>{{tutorial.title}}{% if is_sources %} (sources){% endif %}</h1>

        {{content}}

        <hr/>
        {% if next_tutorial %}
        <div class="text-right">
        <a href="{{site.baseurl}}/tutorials/{{next_category.id}}/{{next_tutorial.id}}.html">Next tutorial: {{next_tutorial.title}}</a>
        </div>
        {% endif %}
      </div>
      </div>
    </div>

    <div class="container-fluid">
      <footer>
        <hr>
        <div class="row">
          <div class="col-8 offset-lg-2 col-lg-6">
            Copyright &copy; CNRS-AIST JRL, CNRS LIRMM 2015-2020
          </div>
          <div class="col-4 col-lg-2 text-right">
            <a href="{{site.baseurl}}/credits.html">Credits</a>
          </div>
        </div>
      </footer>
    </div>
  </body>

</html>
